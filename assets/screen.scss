/* Welcome to Compass.
 * In this file you should write your main styles. (or centralize your imports)
 * Import this file using the following HTML or equivalent:
 * <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" /> */

@import "compass/reset";
@import "compass/css3";

@import "grid";
@import "typography";
@import "other";
@import "decorations";

html {
  body {
    // if we don't have a top gutter the first row of a grid is larger than the others. ie the first row's height cannot be set properly.
    $body-width: calc(100% - #{$gutter * 2});
    width: $body-width;
    margin: $gutter;
    
    @include typographic-grid;
    @include typographic-settings;
    
    
    
    header {
      @include block;
      @include text-grid;
      @include rows(1);
      @include logo; 
    }
    
    footer {
      @include block;
      @include text-grid;
      @include rows(2);
      @include footer-grid;
      
      nav {
        margin-top: $gutter;
      }
    }
    
    
    &.frontpage {
      article {
        @include portfolio-grid;
        
        &.reboot, &.next {
          display: none;
        }
        
      }
    }
    
    
    &.portfolio {
      main {
        @include block;
      }
      
      article {
        aside, h3, figcaption, &.services, &.next, &.logo-animated {
          display: none;
        }
        
        &.logo {
          @include columns(2);
          @include rows(2);
        }
        
        &.intro {
          @include text-grid;
          @include rows(2);
          @include lead;
        }
    
        .short {
          @include block;
          margin-top: $gutter;
        } 
        
        &.smartphone {
          @include single-portfolio-grid(3, 2, 6);
        }
        
        &.tablet {
          @include single-portfolio-grid(4, 3, 7);
        }
        
        &.desktop {
          @include single-portfolio-grid(5, 5, 6);
        }   
        
        
        &.smartphone, &.tablet {
          figure {
            @include smartphone-mockup;
          }
        }
        
      }
      
      .similar-projects {
        display: none;
      }
    }
    
    
    &.story {
      article {
        aside, aside h3 {
          display: block;
        }
        
        &.logo figcaption, .short {
          display: none;
        }
    
        &.intro {
          margin-left: col(3);
        }
        
        
        &.smartphone {
          @include story-grid(3, 3);
      margin-left: col(1);
        }
        
        &.tablet {
          @include story-grid(4, 3);
      margin-left: col(1);
        }
        
        &.desktop {
          @include single-portfolio-grid(8, 7, 6);
          @include story-grid(7, 3);
        }
      }
    
    }
    
    
    &.article {
      header {
        @include rows(2);
      }
      
      // It is important to have a height for <header> to push contents below the title and preserve the grid defined below
      article {
        @include article-grid;
        @include extended-typographic-settings;
        
        &.intro {
          p {
            @include lead;
          }
        }
      }
    }
    
    


    // The harmony calculator
    // ---------------------------------------------
    
    .h-vertical, .h-horizontal, .h-gravity-point {
      position: absolute;
      z-index: -1;
      opacity: .3;
    }
    .h-vertical {
      left: calc(50% - 1px);
      height: 100%;
      border-left: 1px solid red;
    }

    .h-horizontal {
      top: calc(50% - 1px);
      width: $body-width;
      border-bottom: 1px solid red;
    }
    
    .h-gravity-point {
      width: $gutter;
      height: $gutter;
      background: red;
    }
    
    
    // The visual grid
    // ---------------------------------------------
    #grid {
      display: block;
      
      position: absolute;
      top: 0;
      opacity: .1;
      z-index: -1;
    }
    
    #grid .col {
      border-right: 1px solid;
      border-bottom: 1px solid;
      width: calc(#{$grid-width} + #{$gutter} - 1px);
      height: calc(#{$text-height} + #{$gutter} - 1px);
      float: left;
    }
    
    #grid .gutter-right {
      float: right;
      border-left: 1px solid;
      width: calc(#{$gutter} - 1px);
      height: 100%;
    }
    
    #grid .gutter-bottom {
      float: left;
      border-bottom: 1px solid;
      height: calc(#{$gutter} - 1px);
      width: 100%;
    }
  }
}
